language: rust

git:
  depth: 1

os:
  - linux
  - osx
  - windows

rust:
  - stable
  - nightly

matrix:
  fast_finish: true
  allow_failures:
    - rust: nightly
    - os: windows

install: ci/install.sh
script: ci/script.sh
before_deploy: ci/before_deploy.sh

deploy:
  provider: releases
  api_key:
    secure: f/dzzrB8MmZsLl1BpeGw7Koz4+KmWlF8PCvLA7361TJHEZ+9WX95AB6IDsICzzwQR7+uyX14Qv+Xx7LQfUMrL8EBQDVU8cNFrEhhth+E8G+LwbJnG7DhlBXNz/GmPvz5r2fsuecVSyDhZr+t0Z2v1D/6qyEqruVTRGC76RgezzASb2ecJ0BQFfvwOWnX+J5mk9Ss8FQEohipu+EF9ItKP+QlTeWhl5qC9XNhiumYG/KHjujch8xX0TElY3AeRvqk2jyCoTFn17r4DI3/bh/4FuKMtNun5gh+qRkD79PT02qhZ1qFpaJqzO5HK0xQpUpnmHb1SGvizfHsCbioYXaSS1QmFIbEMUsBJ+Q/yKPGYWijjAmFfFtnd41J8631d1cgJrI+NyIehSgWCOliTHsdabiaFPO+o2zpKyr0eFX4VGiKdrf920dtMJMslhq4AEUG/nyv85SPbf3XMQ094O1jMJ9jOBnldfQL1u3udNQpgKwiKjLlQ/o4veWgBpujRdqKQzgaK7ntTKzplfgVx50OVxUhfIjDv9xhLIsKQEGVIcFlDMFBuNTI/B9WqwaMit3N9GX+yI+eBPs6hdKTLeUxs3sbBBNtVCKJPM1sz5B46KHE2wHQq+FTcyP7bO8D1Pvs/PhCJreE0WDHH2c++yeCzh368jkhbSpj2EOCSAho9VY=
  skip_cleanup: true
  file_glob: true
  file: "./target/deploy/*"
  on:
    tags: true
    rust: stable
